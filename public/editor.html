<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Site RomÃ¢ntico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial,sans-serif;
  overflow-x:hidden;
}

.editor{
  padding:20px;
  background:#0d0f18;
  position:relative;
  z-index:5;
}

label{
  color:#ffb3d9;
  display:block;
  margin:14px 0 6px;
}

input,textarea{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:1em;
}

textarea{min-height:90px}

/* FUNDOS */
.bg-options{
  display:flex;
  gap:12px;
  justify-content:center;
}
.bg-card{
  width:60px;height:60px;
  border-radius:14px;
  border:3px solid #000;
  cursor:pointer;
}
.bg-card.selected{border:3px solid #fff}
.azul{background:radial-gradient(circle,#2b6cff,#000)}
.roxo{background:radial-gradient(circle,#8a5cff,#000)}
.rosa{background:radial-gradient(circle,#ff5fa2,#000)}
.preto{background:radial-gradient(circle,#222,#000)}

/* FOTOS */
.photo-grid{
  display:flex;
  gap:10px;
  justify-content:center;
}
.photo-slot{
  width:90px;height:90px;
  border-radius:18px;
  border:2px dashed #777;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2em;
  cursor:pointer;
  position:relative;
}
.photo-slot.filled{border:none}

.photo-remove{
  position:absolute;
  top:-8px;right:-8px;
  background:#ff4b4b;
  color:#fff;
  border-radius:50%;
  width:22px;height:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.photo{
  background:#fff;
  padding:8px 8px 18px;
  border-radius:6px;
  margin:20px auto;
  max-width:280px;
  box-shadow:0 0 18px rgba(255,255,255,.35);
  animation:floatPhoto 6s ease-in-out infinite;
}
@keyframes floatPhoto{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}

/* MÃšSICA */
#audioPlayer{
  display:none;
  margin:10px auto;
  width:90%;
}
.music-box{
  margin-top:12px;
  background:#222;
  padding:14px;
  border-radius:14px;
  text-align:center;
  cursor:pointer;
}
.remove-music{
  display:none;
  color:#ff4b4b;
  text-align:center;
  cursor:pointer;
  margin-top:6px;
}

/* PREVIEW */
.preview{
  min-height:100vh;
  padding:40px 16px 160px;
  text-align:center;
  position:relative;
  overflow:hidden;
}

.nome{
  font-family:'Playfair Display', serif;
  font-size:3em;
  color:#ffd400;
}

.mensagem{
  font-family:'Playfair Display', serif;
  font-size:1.8em;
  font-style:italic;
}

.carta{
  background:#fff;
  color:#333;
  padding:22px;
  border-radius:20px;
  margin-top:20px;
  display:none;
}

/* BOTÃƒO COMPRA */
.pay{
  background:#ffd400;
  color:#000;
  font-weight:bold;
  animation:pulse 1.4s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,212,0,.6)}
  70%{box-shadow:0 0 0 16px rgba(255,212,0,0)}
  100%{box-shadow:0 0 0 0 rgba(255,212,0,0)}
}

/* CORAÃ‡Ã•ES */
.heart{
  position:absolute;
  bottom:-20px;
  font-size:18px;
  opacity:.6;
  animation:float 8s linear infinite;
  pointer-events:none;
}
@keyframes float{
  to{transform:translateY(-120vh);opacity:0}
}
</style>
</head>

<body>

<div class="editor">
  <label>Nome</label>
  <input id="nomeInput">

  <label>Mensagem</label>
  <textarea id="msgInput"></textarea>

  <label>Carta</label>
  <textarea id="cartaInput"></textarea>

  <label>Data</label>
  <input type="date" id="dataInput">

  <label>Fotos</label>
  <div class="photo-grid">
    <div class="photo-slot" data-slot="0">+</div>
    <div class="photo-slot" data-slot="1">+</div>
    <div class="photo-slot" data-slot="2">+</div>
  </div>
  <input type="file" id="fotoInput" accept="image/*" hidden>

  <label>MÃºsica</label>
  <div class="music-box" id="musicBox">Adicionar mÃºsica ðŸŽµ</div>
  <div class="remove-music" id="removeMusic">Remover mÃºsica</div>
  <input type="file" id="musicaInput" accept="audio/*" hidden>

  <label>Fundo</label>
  <div class="bg-options">
    <div class="bg-card azul selected" data-bg="azul"></div>
    <div class="bg-card roxo" data-bg="roxo"></div>
    <div class="bg-card rosa" data-bg="rosa"></div>
    <div class="bg-card preto" data-bg="preto"></div>
  </div>
</div>

<div class="preview azul" id="preview">
  <audio id="audioPlayer" controls></audio>
  <div class="nome" id="nome"></div>
  <div class="mensagem" id="mensagem"></div>
  <div id="midias"></div>
  <button id="btnCarta">ðŸ’Œ Abrir carta</button>
  <div class="carta" id="carta"></div>
  <button class="pay" id="btnComprar">Gerar QR Code por R$9,99</button>
</div>

<script>
/* === LÃ“GICA COMPLETA FUNCIONAL === */
const nomeInput=nomeInputEl=document.getElementById("nomeInput");
const msgInput=document.getElementById("msgInput");
const cartaInput=document.getElementById("cartaInput");
const dataInput=document.getElementById("dataInput");
const nome=document.getElementById("nome");
const mensagem=document.getElementById("mensagem");
const carta=document.getElementById("carta");
const preview=document.getElementById("preview");
const fotoInput=document.getElementById("fotoInput");
const midias=document.getElementById("midias");
const musicBox=document.getElementById("musicBox");
const musicaInput=document.getElementById("musicaInput");
const audio=document.getElementById("audioPlayer");
const removeMusic=document.getElementById("removeMusic");

nomeInput.oninput=()=>nome.innerText=nomeInput.value;
msgInput.oninput=()=>mensagem.innerText=msgInput.value;
cartaInput.oninput=()=>carta.innerText=cartaInput.value;

document.getElementById("btnCarta").onclick=()=>{
  carta.style.display=carta.style.display==="block"?"none":"block";
};

/* CORAÃ‡Ã•ES */
function criarCoracoes(){
  for(let i=0;i<12;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="â¤ï¸";
    h.style.left=Math.random()*100+"%";
    h.style.animationDuration=6+Math.random()*6+"s";
    preview.appendChild(h);
  }
}
criarCoracoes();

/* FUNDOS */
document.querySelectorAll(".bg-card").forEach(c=>{
  c.onclick=()=>{
    document.querySelectorAll(".bg-card").forEach(x=>x.classList.remove("selected"));
    c.classList.add("selected");
    preview.className="preview "+c.dataset.bg;
  };
});

/* FOTOS */
let fotos=[null,null,null],slotAtual=null;
document.querySelectorAll(".photo-slot").forEach(s=>{
  s.onclick=()=>{slotAtual=s.dataset.slot;fotoInput.click();}
});
fotoInput.onchange=e=>{
  const file=e.target.files[0];
  if(!file) return;
  const url=URL.createObjectURL(file);
  const div=document.createElement("div");
  div.className="photo";
  div.innerHTML=`<img src="${url}" style="width:100%">`;
  midias.appendChild(div);
};

/* MÃšSICA */
musicBox.onclick=()=>musicaInput.click();
musicaInput.onchange=()=>{
  audio.src=URL.createObjectURL(musicaInput.files[0]);
  audio.style.display="block";
  removeMusic.style.display="block";
};
removeMusic.onclick=()=>{
  audio.src="";
  audio.style.display="none";
  removeMusic.style.display="none";
};

/* COMPRA */
document.getElementById("btnComprar").onclick=async()=>{
  const res=await fetch("/create-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nome:nomeInput.value})});
  const data=await res.json();
  if(data.payment_id) location.href=`/aguardando.html?payment_id=${data.payment_id}`;
};
</script>

</body>
</html>


